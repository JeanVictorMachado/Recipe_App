{"ast":null,"code":"var _jsxFileName = \"/home/jean/projetos-pessoais-portifolio/Recipe_App/src/Pages/DetalhesComidas.jsx\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useParams } from 'react-router';\nimport { detailsFoodById } from '../services/aPI';\nimport ContextAPI from '../Context/ContextAPI';\nimport Instructions from '../components/Instructions';\nimport Ingredients from '../components/Ingredients';\nimport BasicInfo from '../components/BasicInfo';\nimport Recomendations from '../components/Recomendations';\nimport './DetalhesComida.css';\n\nconst DetalhesComida = () => {\n  const [foodsInProgress, setFoodsInProgress] = useState({\n    meals: {}\n  });\n  const [isRecipeDone, setIsRecipeDone] = useState(false);\n  const currentFoodID = useParams().id;\n  const {\n    detailsInfo,\n    setDetailsInfo\n  } = useContext(ContextAPI);\n\n  const handleIdDetails = async () => {\n    const food = await detailsFoodById(currentFoodID);\n    setDetailsInfo({ ...detailsInfo,\n      foods: food.meals[0]\n    });\n  };\n\n  const loadRecipesInProgressFromLocalStorage = () => {\n    if (localStorage.getItem('inProgressRecipes') === null) {\n      const inProgressRecipes = {\n        cocktails: {},\n        meals: {}\n      };\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n    }\n\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    setFoodsInProgress({\n      meals: progressRecipes.meals\n    });\n  };\n\n  const loadDoneRecipesFromStorage = () => {\n    if (localStorage.getItem('doneRecipes') === null) {\n      const doneRecipes = [];\n      localStorage.setItem('doneRecipes', JSON.stringify(doneRecipes));\n    }\n\n    const doneRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n    const isCurrentRecipeDone = doneRecipes.some(key => key.id === currentFoodID);\n    if (isCurrentRecipeDone) setIsRecipeDone(true);else setIsRecipeDone(false);\n  };\n\n  useEffect(() => {\n    handleIdDetails();\n    loadRecipesInProgressFromLocalStorage();\n    loadDoneRecipesFromStorage();\n  }, []);\n\n  const getIngredientsOrMeasure = param => {\n    const dataObject = detailsInfo.foods;\n    const dataKeys = Object.keys(dataObject).filter(key => key.includes(param) && dataObject[key] !== '' && dataObject[key] !== ' ' && dataObject[key] !== null);\n    const ingredients = dataKeys.map(key => dataObject[key]);\n    return ingredients;\n  };\n\n  const progressButton = () => {\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const mealProgressID = detailsInfo.foods.idMeal;\n    const inProgressRecipes = { ...progressRecipes,\n      meals: { ...progressRecipes.meals,\n        [mealProgressID]: getIngredientsOrMeasure('strIngredient')\n      }\n    };\n    localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n  };\n\n  const getProgressButton = () => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"link-button\",\n    to: `/comidas/${detailsInfo.foods.idMeal}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"start-recipe-btn\",\n    onClick: progressButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, foodsInProgress.meals[detailsInfo.foods.idMeal] ? 'Continuar Receita' : 'Iniciar Receita')));\n\n  const getVideo = () => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-span-video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, \"Video\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    \"data-testid\": \"video\",\n    href: detailsInfo.foods.strYoutube,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: detailsInfo.foods.strMealThumb,\n    alt: detailsInfo.foods.strMeal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }))));\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"body-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }\n  }, detailsInfo ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BasicInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Ingredients, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Instructions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }), getVideo(), /*#__PURE__*/React.createElement(Recomendations, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }), !isRecipeDone && getProgressButton()) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, \"Loading...\"));\n};\n\nexport default DetalhesComida;","map":{"version":3,"sources":["/home/jean/projetos-pessoais-portifolio/Recipe_App/src/Pages/DetalhesComidas.jsx"],"names":["React","useEffect","useState","useContext","Link","useParams","detailsFoodById","ContextAPI","Instructions","Ingredients","BasicInfo","Recomendations","DetalhesComida","foodsInProgress","setFoodsInProgress","meals","isRecipeDone","setIsRecipeDone","currentFoodID","id","detailsInfo","setDetailsInfo","handleIdDetails","food","foods","loadRecipesInProgressFromLocalStorage","localStorage","getItem","inProgressRecipes","cocktails","setItem","JSON","stringify","progressRecipes","parse","loadDoneRecipesFromStorage","doneRecipes","isCurrentRecipeDone","some","key","getIngredientsOrMeasure","param","dataObject","dataKeys","Object","keys","filter","includes","ingredients","map","progressButton","mealProgressID","idMeal","getProgressButton","getVideo","strYoutube","strMealThumb","strMeal"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useParams } from 'react-router';\n\nimport { detailsFoodById } from '../services/aPI';\nimport ContextAPI from '../Context/ContextAPI';\nimport Instructions from '../components/Instructions';\nimport Ingredients from '../components/Ingredients';\nimport BasicInfo from '../components/BasicInfo';\nimport Recomendations from '../components/Recomendations';\nimport './DetalhesComida.css';\n\nconst DetalhesComida = () => {\n  const [foodsInProgress, setFoodsInProgress] = useState({ meals: {} });\n  const [isRecipeDone, setIsRecipeDone] = useState(false);\n\n  const currentFoodID = useParams().id;\n\n  const { detailsInfo, setDetailsInfo } = useContext(ContextAPI);\n\n  const handleIdDetails = async () => {\n    const food = await detailsFoodById(currentFoodID);\n\n    setDetailsInfo({ ...detailsInfo, foods: food.meals[0] });\n  };\n\n  const loadRecipesInProgressFromLocalStorage = () => {\n    if (localStorage.getItem('inProgressRecipes') === null) {\n      const inProgressRecipes = {\n        cocktails: {},\n        meals: {},\n      };\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n    }\n\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    setFoodsInProgress({ meals: progressRecipes.meals });\n  };\n\n  const loadDoneRecipesFromStorage = () => {\n    if (localStorage.getItem('doneRecipes') === null) {\n      const doneRecipes = [];\n      localStorage.setItem('doneRecipes', JSON.stringify(doneRecipes));\n    }\n\n    const doneRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n    const isCurrentRecipeDone = doneRecipes.some((key) => key.id === currentFoodID);\n\n    if (isCurrentRecipeDone) setIsRecipeDone(true);\n    else setIsRecipeDone(false);\n  };\n\n  useEffect(() => {\n    handleIdDetails();\n    loadRecipesInProgressFromLocalStorage();\n    loadDoneRecipesFromStorage();\n  }, []);\n\n  const getIngredientsOrMeasure = (param) => {\n    const dataObject = detailsInfo.foods;\n\n    const dataKeys = Object.keys(dataObject)\n      .filter((key) => key.includes(param)\n        && dataObject[key] !== '' && dataObject[key] !== ' ' && dataObject[key] !== null);\n\n    const ingredients = dataKeys\n      .map((key) => dataObject[key]);\n\n    return ingredients;\n  };\n\n  const progressButton = () => {\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const mealProgressID = detailsInfo.foods.idMeal;\n    const inProgressRecipes = {\n      ...progressRecipes,\n      meals: {\n        ...progressRecipes.meals,\n        [mealProgressID]: getIngredientsOrMeasure('strIngredient'),\n      },\n    };\n    localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n  };\n\n  const getProgressButton = () => (\n    <div className=\"container-button\">\n      <Link\n        className=\"link-button\"\n        to={ `/comidas/${detailsInfo.foods.idMeal}/in-progress` }\n      >\n        <button\n          type=\"button\"\n          data-testid=\"start-recipe-btn\"\n          onClick={ progressButton }\n        >\n\n          {foodsInProgress.meals[detailsInfo.foods.idMeal]\n            ? 'Continuar Receita' : 'Iniciar Receita'}\n        </button>\n      </Link>\n    </div>\n  );\n\n  const getVideo = () => (\n    <div>\n      <div className=\"container-span-video\">\n        <span>Video</span>\n      </div>\n      <div className=\"container-video\">\n        <a\n          data-testid=\"video\"\n          href={ detailsInfo.foods.strYoutube }\n        >\n          <img\n            src={ detailsInfo.foods.strMealThumb }\n            alt={ detailsInfo.foods.strMeal }\n          />\n        </a>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"body-details\">\n      {detailsInfo ? (\n        <div className=\"container-main\">\n          <BasicInfo />\n          <Ingredients />\n          <Instructions />\n          {getVideo()}\n          <Recomendations />\n          {!isRecipeDone && (getProgressButton())}\n        </div>\n      ) : <div>Loading...</div>}\n    </div>\n  );\n};\n\nexport default DetalhesComida;\n"]},"metadata":{},"sourceType":"module"}