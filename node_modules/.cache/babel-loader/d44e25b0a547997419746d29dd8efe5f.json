{"ast":null,"code":"var _jsxFileName = \"/home/jean/projetos-pessoais-portifolio/Recipe_App/src/components/FavoriteBtn/FavoriteDrinkBtn.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport whiteHeartIcon from \"../../images/whiteHeartIcon.svg\";\nimport blackHeartIcon from \"../../images/blackHeartIcon.svg\";\nimport { detailsDrinkById } from '../../services/aPI';\n\nconst FavoriteDrinkButton = () => {\n  const [stateLocal, setStatelocal] = useState();\n  const [isFavorite, setIsFavorite] = useState(false);\n  const currentDrinkID = useParams().id;\n\n  const handleIdDetails = async () => {\n    const drink = await detailsDrinkById(currentDrinkID);\n    setStatelocal({ ...stateLocal,\n      drink\n    });\n  };\n\n  const loadFavoriteRecipesFromLocalStorage = () => {\n    if (localStorage.getItem('favoriteRecipes') === null) {\n      const favoriteRecipes = [];\n      localStorage.setItem('favoriteRecipes', JSON.stringify(favoriteRecipes));\n    }\n\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const isRecipeFavorite = favoriteRecipes[0] ? favoriteRecipes.find(recipe => recipe.id === currentDrinkID) : undefined;\n    if (isRecipeFavorite) setIsFavorite(true);else setIsFavorite(false);\n  };\n\n  useEffect(() => {\n    handleIdDetails();\n    loadFavoriteRecipesFromLocalStorage();\n  }, []);\n\n  const handleFavorite = () => {\n    const currentDrink = stateLocal.drink.drinks[0];\n    const recipeData = {\n      id: currentDrink.idDrink,\n      type: 'bebida',\n      area: '',\n      category: currentDrink.strCategory,\n      alcoholicOrNot: currentDrink.strAlcoholic,\n      name: currentDrink.strDrink,\n      image: currentDrink.strDrinkThumb\n    };\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const zero = 0;\n    const isAlreadyAFavorite = favoriteRecipes.length > zero ? favoriteRecipes.find(recipe => recipe.id === currentDrink.idDrink) : undefined;\n\n    if (isAlreadyAFavorite) {\n      setIsFavorite(false);\n      localStorage.setItem('favoriteRecipes', JSON.stringify([...favoriteRecipes.filter(recipe => recipe.id !== currentDrink.idDrink)]));\n    } else {\n      setIsFavorite(true);\n      localStorage.setItem('favoriteRecipes', JSON.stringify([...favoriteRecipes, recipeData]));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleFavorite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"favorite-btn\",\n    src: !isFavorite ? whiteHeartIcon : blackHeartIcon,\n    alt: !isFavorite ? 'whiteHeartIcon' : 'blackHeartIcon',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default FavoriteDrinkButton;","map":{"version":3,"sources":["/home/jean/projetos-pessoais-portifolio/Recipe_App/src/components/FavoriteBtn/FavoriteDrinkBtn.js"],"names":["React","useEffect","useState","useParams","detailsDrinkById","FavoriteDrinkButton","stateLocal","setStatelocal","isFavorite","setIsFavorite","currentDrinkID","id","handleIdDetails","drink","loadFavoriteRecipesFromLocalStorage","localStorage","getItem","favoriteRecipes","setItem","JSON","stringify","parse","isRecipeFavorite","find","recipe","undefined","handleFavorite","currentDrink","drinks","recipeData","idDrink","type","area","category","strCategory","alcoholicOrNot","strAlcoholic","name","strDrink","image","strDrinkThumb","zero","isAlreadyAFavorite","length","filter","whiteHeartIcon","blackHeartIcon"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport whiteHeartIcon from '../../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../../images/blackHeartIcon.svg';\nimport { detailsDrinkById } from '../../services/aPI';\n\nconst FavoriteDrinkButton = () => {\n  const [stateLocal, setStatelocal] = useState();\n  const [isFavorite, setIsFavorite] = useState(false);\n  const currentDrinkID = useParams().id;\n\n  const handleIdDetails = async () => {\n    const drink = await detailsDrinkById(currentDrinkID);\n\n    setStatelocal({ ...stateLocal, drink });\n  };\n\n  const loadFavoriteRecipesFromLocalStorage = () => {\n    if (localStorage.getItem('favoriteRecipes') === null) {\n      const favoriteRecipes = [];\n      localStorage.setItem('favoriteRecipes', JSON.stringify(favoriteRecipes));\n    }\n\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const isRecipeFavorite = favoriteRecipes[0] ? favoriteRecipes\n      .find((recipe) => recipe.id === currentDrinkID) : undefined;\n\n    if (isRecipeFavorite) setIsFavorite(true);\n    else setIsFavorite(false);\n  };\n\n  useEffect(() => {\n    handleIdDetails();\n    loadFavoriteRecipesFromLocalStorage();\n  }, []);\n\n  const handleFavorite = () => {\n    const currentDrink = stateLocal.drink.drinks[0];\n    const recipeData = {\n      id: currentDrink.idDrink,\n      type: 'bebida',\n      area: '',\n      category: currentDrink.strCategory,\n      alcoholicOrNot: currentDrink.strAlcoholic,\n      name: currentDrink.strDrink,\n      image: currentDrink.strDrinkThumb,\n    };\n\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const zero = 0;\n    const isAlreadyAFavorite = favoriteRecipes.length > zero\n      ? favoriteRecipes.find((recipe) => recipe.id === currentDrink.idDrink) : undefined;\n\n    if (isAlreadyAFavorite) {\n      setIsFavorite(false);\n      localStorage.setItem('favoriteRecipes', JSON.stringify([...favoriteRecipes\n        .filter((recipe) => recipe.id !== currentDrink.idDrink)]));\n    } else {\n      setIsFavorite(true);\n      localStorage.setItem('favoriteRecipes', JSON.stringify([\n        ...favoriteRecipes, recipeData]));\n    }\n  };\n\n  return (\n    <button\n      type=\"button\"\n      onClick={ handleFavorite }\n    >\n      <img\n        data-testid=\"favorite-btn\"\n        src={ !isFavorite ? whiteHeartIcon : blackHeartIcon }\n        alt={ !isFavorite ? 'whiteHeartIcon' : 'blackHeartIcon' }\n      />\n    </button>);\n};\n\nexport default FavoriteDrinkButton;\n"]},"metadata":{},"sourceType":"module"}