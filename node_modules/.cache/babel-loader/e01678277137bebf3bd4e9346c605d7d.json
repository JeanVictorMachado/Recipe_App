{"ast":null,"code":"var _jsxFileName = \"/home/jean/Trybe/projetos-Trybe/sd-06-project-recipes-app/src/Pages/DetalhesComidas.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { detailsFoodById, showSugestedDrinks } from '../services/aPI';\nimport './DetalhesComida.css';\nimport shareIcon from \"../images/shareIcon.svg\";\nimport whiteHeartIcon from \"../images/whiteHeartIcon.svg\";\nimport blackHeartIcon from \"../images/blackHeartIcon.svg\";\n\nconst DetalhesComida = () => {\n  const [stateLocal, setStatelocal] = useState();\n  const [stateSugestions, setSugestions] = useState();\n  const [foodsInProgress, setFoodsInProgress] = useState({\n    meals: {}\n  });\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [windowLink, setWindowLink] = useState(window.location.href);\n  const [linkCopied, setLinkCopied] = useState(false);\n\n  const handleShareClick = () => {\n    const url = window.location.href;\n    setWindowLink(url);\n    setLinkCopied(true);\n  };\n\n  const currentFoodID = useParams().id;\n\n  const handleIdDetails = async () => {\n    const food = await detailsFoodById(currentFoodID);\n    console.log(food);\n    setStatelocal({ ...stateLocal,\n      food\n    });\n  };\n\n  const getSugestedDrinks = async () => {\n    const drinks = await showSugestedDrinks();\n    setSugestions(drinks);\n  };\n\n  const loadRecipesInProgressFromLocalStorage = () => {\n    if (localStorage.getItem('inProgressRecipes') === null) {\n      const inProgressRecipes = {\n        cocktails: {},\n        meals: {}\n      };\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n    }\n\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    setFoodsInProgress({\n      meals: progressRecipes.meals\n    });\n  };\n\n  const loadFavoriteRecipesFromLocalStorage = () => {\n    if (localStorage.getItem('favoriteRecipes') === null) {\n      const favoriteRecipes = [];\n      localStorage.setItem('favoriteRecipes', JSON.stringify(favoriteRecipes));\n    }\n\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const isRecipeFavorite = favoriteRecipes[0] ? favoriteRecipes.find(recipe => recipe.id === currentFoodID) : undefined;\n    if (isRecipeFavorite) setIsFavorite(true);else setIsFavorite(false);\n  };\n\n  useEffect(() => {\n    handleIdDetails();\n    getSugestedDrinks();\n    loadRecipesInProgressFromLocalStorage();\n    loadFavoriteRecipesFromLocalStorage();\n  }, []);\n\n  const getIngredientsOrMeasure = param => {\n    const dataObject = stateLocal.food.meals[0];\n    const dataKeys = Object.keys(dataObject).filter(key => key.includes(param) && dataObject[key] !== '' && dataObject[key] !== ' ' && dataObject[key] !== null);\n    const ingredients = dataKeys.map(key => dataObject[key]);\n    return ingredients;\n  };\n\n  const progressButton = () => {\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const mealProgressID = stateLocal.food.meals[0].idMeal;\n    const inProgressRecipes = { ...progressRecipes,\n      meals: { ...progressRecipes.meals,\n        [mealProgressID]: getIngredientsOrMeasure('strIngredient')\n      }\n    };\n    localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n  };\n\n  const handleFavorite = () => {\n    const currentFood = stateLocal.food.meals[0];\n    const recipeData = {\n      id: currentFood.idMeal,\n      type: 'comida',\n      area: currentFood.strArea,\n      category: currentFood.strCategory,\n      alcoholicOrNot: '',\n      name: currentFood.strMeal,\n      image: currentFood.strMealThumb\n    };\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const zero = 0;\n    const isAlreadyAFavorite = favoriteRecipes.length > zero ? favoriteRecipes.find(recipe => recipe.id === currentFood.idMeal) : undefined;\n\n    if (isAlreadyAFavorite) {\n      setIsFavorite(false);\n      localStorage.setItem('favoriteRecipes', JSON.stringify([...favoriteRecipes.filter(recipe => recipe.id !== currentFood.idMeal)]));\n    } else {\n      setIsFavorite(true);\n      localStorage.setItem('favoriteRecipes', JSON.stringify([...favoriteRecipes, recipeData]));\n    }\n  };\n\n  const number = 5;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"body-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, stateLocal ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-photo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"recipe-photo\",\n    className: \"img-initial\",\n    src: stateLocal.food.meals[0].strMealThumb,\n    alt: stateLocal.food.meals[0].strMeal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"title\",\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }, stateLocal.food.meals[0].strMeal), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CopyToClipboard, {\n    text: windowLink,\n    onCopy: () => setLinkCopied(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"share-btn\",\n    onClick: handleShareClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: shareIcon,\n    alt: \"shareIcon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleFavorite,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"favorite-btn\",\n    src: !isFavorite ? whiteHeartIcon : blackHeartIcon,\n    alt: !isFavorite ? 'whiteHeartIcon' : 'blackHeartIcon',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  })), linkCopied ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 29\n    }\n  }, \"Link copiado!\") : null)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-cotegory\",\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }, stateLocal.food.meals[0].strCategory), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"span-ingredients\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, \"Ingredients\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"box-ingredients\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }, getIngredientsOrMeasure('strIngredient').map((ingred, i) => /*#__PURE__*/React.createElement(\"li\", {\n    \"data-testid\": `${i}-ingredient-name-and-measure`,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, `${ingred} - ${getIngredientsOrMeasure('strMeasure')[i]}`)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }, \"Instructions\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-instructions-details\",\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, stateLocal.food.meals[0].strInstructions)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, \"Video\"), /*#__PURE__*/React.createElement(\"a\", {\n    \"data-testid\": \"video\",\n    href: stateLocal.food.meals[0].strYoutube,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: stateLocal.food.meals[0].strMealThumb,\n    alt: stateLocal.food.meals[0].strMeal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"recomendation-span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 11\n    }\n  }, \"Recomendadas\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-recomendations\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }, stateSugestions && stateSugestions.drinks.map((drink, index) => {\n    if (index <= number) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"main-scroll\",\n        key: drink.strDrink,\n        \"data-testid\": `${index}-recomendation-card`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        \"data-testid\": `${index}-recomendation-title`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }\n      }, drink.strDrink), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"button\",\n        onClick: () => handleIdDetails(drink.idDrink),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: `/comidas/${drink.idDrink}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"img-recomendations\",\n        width: \"200\",\n        src: drink.strDrinkThumb,\n        alt: drink.strDrink,\n        \"data-testid\": `${index}-card-img`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 25\n        }\n      }))));\n    }\n\n    return '';\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"start-recipe-btn\",\n    onClick: progressButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"link-button\",\n    to: `/comidas/${stateLocal.food.meals[0].idMeal}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 15\n    }\n  }, foodsInProgress.meals[stateLocal.food.meals[0].idMeal] ? 'Continuar Receita' : 'Iniciar Receita')))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 11\n    }\n  }, \"Loading...\"));\n};\n\nexport default DetalhesComida;","map":{"version":3,"sources":["/home/jean/Trybe/projetos-Trybe/sd-06-project-recipes-app/src/Pages/DetalhesComidas.jsx"],"names":["React","useEffect","useState","useParams","Link","CopyToClipboard","detailsFoodById","showSugestedDrinks","DetalhesComida","stateLocal","setStatelocal","stateSugestions","setSugestions","foodsInProgress","setFoodsInProgress","meals","isFavorite","setIsFavorite","windowLink","setWindowLink","window","location","href","linkCopied","setLinkCopied","handleShareClick","url","currentFoodID","id","handleIdDetails","food","console","log","getSugestedDrinks","drinks","loadRecipesInProgressFromLocalStorage","localStorage","getItem","inProgressRecipes","cocktails","setItem","JSON","stringify","progressRecipes","parse","loadFavoriteRecipesFromLocalStorage","favoriteRecipes","isRecipeFavorite","find","recipe","undefined","getIngredientsOrMeasure","param","dataObject","dataKeys","Object","keys","filter","key","includes","ingredients","map","progressButton","mealProgressID","idMeal","handleFavorite","currentFood","recipeData","type","area","strArea","category","strCategory","alcoholicOrNot","name","strMeal","image","strMealThumb","zero","isAlreadyAFavorite","length","number","shareIcon","whiteHeartIcon","blackHeartIcon","ingred","i","strInstructions","strYoutube","drink","index","strDrink","idDrink","strDrinkThumb"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { detailsFoodById, showSugestedDrinks } from '../services/aPI';\nimport './DetalhesComida.css';\n\nimport shareIcon from '../images/shareIcon.svg';\nimport whiteHeartIcon from '../images/whiteHeartIcon.svg';\nimport blackHeartIcon from '../images/blackHeartIcon.svg';\n\nconst DetalhesComida = () => {\n  const [stateLocal, setStatelocal] = useState();\n  const [stateSugestions, setSugestions] = useState();\n  const [foodsInProgress, setFoodsInProgress] = useState({ meals: {} });\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [windowLink, setWindowLink] = useState(window.location.href);\n  const [linkCopied, setLinkCopied] = useState(false);\n\n  const handleShareClick = () => {\n    const url = window.location.href;\n\n    setWindowLink(url);\n    setLinkCopied(true);\n  };\n\n  const currentFoodID = useParams().id;\n\n  const handleIdDetails = async () => {\n    const food = await detailsFoodById(currentFoodID);\n    console.log(food);\n    setStatelocal({ ...stateLocal, food });\n  };\n\n  const getSugestedDrinks = async () => {\n    const drinks = await showSugestedDrinks();\n    setSugestions(drinks);\n  };\n\n  const loadRecipesInProgressFromLocalStorage = () => {\n    if (localStorage.getItem('inProgressRecipes') === null) {\n      const inProgressRecipes = {\n        cocktails: {},\n        meals: {},\n      };\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n    }\n\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    setFoodsInProgress({ meals: progressRecipes.meals });\n  };\n\n  const loadFavoriteRecipesFromLocalStorage = () => {\n    if (localStorage.getItem('favoriteRecipes') === null) {\n      const favoriteRecipes = [];\n      localStorage.setItem('favoriteRecipes', JSON.stringify(favoriteRecipes));\n    }\n\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const isRecipeFavorite = favoriteRecipes[0] ? favoriteRecipes\n      .find((recipe) => recipe.id === currentFoodID) : undefined;\n\n    if (isRecipeFavorite) setIsFavorite(true);\n    else setIsFavorite(false);\n  };\n\n  useEffect(() => {\n    handleIdDetails();\n    getSugestedDrinks();\n    loadRecipesInProgressFromLocalStorage();\n    loadFavoriteRecipesFromLocalStorage();\n  }, []);\n\n  const getIngredientsOrMeasure = (param) => {\n    const dataObject = stateLocal.food.meals[0];\n\n    const dataKeys = Object.keys(dataObject)\n      .filter((key) => key.includes(param)\n        && dataObject[key] !== '' && dataObject[key] !== ' ' && dataObject[key] !== null);\n\n    const ingredients = dataKeys\n      .map((key) => dataObject[key]);\n\n    return ingredients;\n  };\n\n  const progressButton = () => {\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const mealProgressID = stateLocal.food.meals[0].idMeal;\n    const inProgressRecipes = {\n      ...progressRecipes,\n      meals: {\n        ...progressRecipes.meals,\n        [mealProgressID]: getIngredientsOrMeasure('strIngredient'),\n      },\n    };\n    localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n  };\n\n  const handleFavorite = () => {\n    const currentFood = stateLocal.food.meals[0];\n    const recipeData = {\n      id: currentFood.idMeal,\n      type: 'comida',\n      area: currentFood.strArea,\n      category: currentFood.strCategory,\n      alcoholicOrNot: '',\n      name: currentFood.strMeal,\n      image: currentFood.strMealThumb,\n    };\n\n    const favoriteRecipes = JSON.parse(localStorage.getItem('favoriteRecipes'));\n    const zero = 0;\n    const isAlreadyAFavorite = favoriteRecipes.length > zero\n      ? favoriteRecipes.find((recipe) => recipe.id === currentFood.idMeal) : undefined;\n\n    if (isAlreadyAFavorite) {\n      setIsFavorite(false);\n      localStorage.setItem('favoriteRecipes', JSON.stringify([...favoriteRecipes\n        .filter((recipe) => recipe.id !== currentFood.idMeal)]));\n    } else {\n      setIsFavorite(true);\n      localStorage.setItem('favoriteRecipes', JSON.stringify([\n        ...favoriteRecipes, recipeData]));\n    }\n  };\n\n  const number = 5;\n\n  return (\n    <div className=\"body-details\">\n      {stateLocal ? (\n        <div className=\"container-main\">\n          {/* {console.log(JSON.parse(localStorage.getItem('heart')).heart)} */}\n          <div className=\"container-photo\">\n            <img\n              data-testid=\"recipe-photo\"\n              className=\"img-initial\"\n              src={ stateLocal.food.meals[0].strMealThumb }\n              alt={ stateLocal.food.meals[0].strMeal }\n            />\n          </div>\n          <div className=\"container-title\">\n            <span\n              className=\"title\"\n              data-testid=\"recipe-title\"\n            >\n              { stateLocal.food.meals[0].strMeal }\n            </span>\n            <div className=\"container-icons\">\n              <CopyToClipboard text={ windowLink } onCopy={ () => setLinkCopied(true) }>\n                <button\n                  type=\"button\"\n                  data-testid=\"share-btn\"\n                  onClick={ handleShareClick }\n                >\n                  <img\n                    src={ shareIcon }\n                    alt=\"shareIcon\"\n                  />\n                </button>\n              </CopyToClipboard>\n              <button\n                type=\"button\"\n                onClick={ handleFavorite }\n              >\n                <img\n                  data-testid=\"favorite-btn\"\n                  src={ !isFavorite ? whiteHeartIcon : blackHeartIcon }\n                  alt={ !isFavorite ? 'whiteHeartIcon' : 'blackHeartIcon' }\n                />\n              </button>\n              {linkCopied ? <span>Link copiado!</span> : null}\n            </div>\n          </div>\n          <div\n            className=\"container-cotegory\"\n            data-testid=\"recipe-category\"\n          >\n            {stateLocal.food.meals[0].strCategory}\n          </div>\n          <div\n            className=\"span-ingredients\"\n          >\n            <span>Ingredients</span>\n          </div>\n          <div className=\"box-ingredients\">\n            <ul>\n              {getIngredientsOrMeasure('strIngredient').map((ingred, i) => (\n                <li\n                  data-testid={ `${i}-ingredient-name-and-measure` }\n                  key={ i }\n                >\n                  {`${ingred} - ${getIngredientsOrMeasure('strMeasure')[i]}`}\n                </li>\n              ))}\n            </ul>\n          </div>\n          <div className=\"container-instructions\">\n            <span>Instructions</span>\n            <div\n              className=\"text-instructions-details\"\n              data-testid=\"instructions\"\n            >\n              {stateLocal.food.meals[0].strInstructions}\n            </div>\n          </div>\n          <div className=\"container-video\">\n            <span>Video</span>\n            <a\n              data-testid=\"video\"\n              href={ stateLocal.food.meals[0].strYoutube }\n            >\n              <img\n                src={ stateLocal.food.meals[0].strMealThumb }\n                alt={ stateLocal.food.meals[0].strMeal }\n              />\n            </a>\n          </div>\n          <span\n            className=\"recomendation-span\"\n          >\n            Recomendadas\n          </span>\n          <div className=\"container-recomendations\">\n            { stateSugestions && stateSugestions.drinks.map((drink, index) => {\n              if (index <= number) {\n                return (\n                  <div\n                    className=\"main-scroll\"\n                    key={ drink.strDrink }\n                    data-testid={ `${index}-recomendation-card` }\n                  >\n                    <p data-testid={ `${index}-recomendation-title` }>\n                      {drink.strDrink}\n                    </p>\n                    <button\n                      type=\"button\"\n                      className=\"button\"\n                      onClick={ () => handleIdDetails(drink.idDrink) }\n                    >\n                      <Link to={ `/comidas/${drink.idDrink}` }>\n                        <img\n                          className=\"img-recomendations\"\n                          width=\"200\"\n                          src={ drink.strDrinkThumb }\n                          alt={ drink.strDrink }\n                          data-testid={ `${index}-card-img` }\n                        />\n                      </Link>\n                    </button>\n                  </div>\n                );\n              }\n              return '';\n            })}\n          </div>\n          <div className=\"container-button\">\n            <button\n              type=\"button\"\n              data-testid=\"start-recipe-btn\"\n              onClick={ progressButton }\n            >\n              <Link\n                className=\"link-button\"\n                to={ `/comidas/${stateLocal.food.meals[0].idMeal}/in-progress` }\n              >\n                {foodsInProgress.meals[stateLocal.food.meals[0].idMeal]\n                  ? 'Continuar Receita' : 'Iniciar Receita'}\n              </Link>\n            </button>\n          </div>\n        </div>\n      ) : <div>Loading...</div>}\n    </div>\n  );\n};\n\nexport default DetalhesComida;\n"]},"metadata":{},"sourceType":"module"}