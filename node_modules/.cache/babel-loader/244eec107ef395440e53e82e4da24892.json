{"ast":null,"code":"var _jsxFileName = \"/home/jean/projetos-pessoais-portifolio/Recipe_App/src/Pages/ProcessoBebida.jsx\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useParams } from 'react-router';\nimport { detailsDrinkById } from '../services/aPI';\nimport ContextAPI from '../Context/ContextAPI';\nimport Instructions from '../components/Instructions';\nimport BasicInfo from '../components/BasicInfo';\nimport IngredientsCheckbox from '../components/IngredientsCheckbox';\nimport './ProcessoComida.css';\n\nconst ProcessoBebidas = () => {\n  const [drinkDetails, setDrinkDetails] = useState();\n  const [isRecipeDone, setIsRecipeDone] = useState(false);\n  const idDrink = useParams().id;\n  const {\n    detailsInfo,\n    setDetailsInfo,\n    isRecipeFinished\n  } = useContext(ContextAPI);\n\n  const getDrinkDetails = async () => {\n    const drink = await detailsDrinkById(idDrink);\n    setDrinkDetails({ ...drinkDetails,\n      drink: drink.drinks[0]\n    });\n    setDetailsInfo({ ...detailsInfo,\n      drinks: drink.drinks[0]\n    });\n  };\n\n  const loadDoneRecipesFromStorage = () => {\n    if (localStorage.getItem('doneRecipes') === null) {\n      const doneRecipes = [];\n      localStorage.setItem('doneRecipes', JSON.stringify(doneRecipes));\n    }\n\n    const doneRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n    const isCurrentRecipeDone = doneRecipes.some(key => key.id === idDrink);\n    if (isCurrentRecipeDone) setIsRecipeDone(true);else setIsRecipeDone(false);\n  };\n\n  useEffect(() => {\n    getDrinkDetails();\n    loadDoneRecipesFromStorage();\n  }, []);\n\n  const removeDrinkFromProgress = () => {\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (progressRecipes !== null) {\n      const progressKeys = Object.keys(progressRecipes.cocktails);\n      let cocktailsObject = {};\n      progressKeys.forEach(key => {\n        if (key !== idDrink) {\n          cocktailsObject = { ...cocktailsObject,\n            [key]: progressKeys[key]\n          };\n        }\n      });\n      localStorage.setItem('inProgressRecipes', JSON.stringify({ ...progressRecipes,\n        cocktails: cocktailsObject\n      }));\n    }\n  };\n\n  const setDoneRecipes = () => {\n    if (drinkDetails) {\n      removeDrinkFromProgress();\n      setIsRecipeDone(true);\n      const doneRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n      localStorage.setItem('doneRecipes', JSON.stringify([...doneRecipes, {\n        id: drinkDetails.drink.idDrink,\n        type: 'bebida',\n        area: drinkDetails.drink.strArea,\n        category: drinkDetails.drink.strCategory,\n        alcoholicOrNot: '',\n        name: drinkDetails.drink.strDrink,\n        photoFood: drinkDetails.drink.strDrinkThumb,\n        doneDate: '',\n        tags: drinkDetails.drink.strTags ? drinkDetails.drink.strTags : []\n      }]));\n    } else return '';\n  };\n\n  const showDoneRecipeBtn = () => /*#__PURE__*/React.createElement(Link, {\n    to: \"/receitas-feitas\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"finish-recipe-btn\",\n    onClick: setDoneRecipes,\n    disabled: !isRecipeFinished,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, \"Finalizar Receita\"));\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, !drinkDetails ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, \"Loading...\") : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"body-progress\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(BasicInfo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(IngredientsCheckbox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Instructions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, !isRecipeDone && showDoneRecipeBtn())));\n};\n\nexport default ProcessoBebidas;","map":{"version":3,"sources":["/home/jean/projetos-pessoais-portifolio/Recipe_App/src/Pages/ProcessoBebida.jsx"],"names":["React","useState","useEffect","useContext","Link","useParams","detailsDrinkById","ContextAPI","Instructions","BasicInfo","IngredientsCheckbox","ProcessoBebidas","drinkDetails","setDrinkDetails","isRecipeDone","setIsRecipeDone","idDrink","id","detailsInfo","setDetailsInfo","isRecipeFinished","getDrinkDetails","drink","drinks","loadDoneRecipesFromStorage","localStorage","getItem","doneRecipes","setItem","JSON","stringify","parse","isCurrentRecipeDone","some","key","removeDrinkFromProgress","progressRecipes","progressKeys","Object","keys","cocktails","cocktailsObject","forEach","setDoneRecipes","type","area","strArea","category","strCategory","alcoholicOrNot","name","strDrink","photoFood","strDrinkThumb","doneDate","tags","strTags","showDoneRecipeBtn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useParams } from 'react-router';\n\nimport { detailsDrinkById } from '../services/aPI';\nimport ContextAPI from '../Context/ContextAPI';\nimport Instructions from '../components/Instructions';\nimport BasicInfo from '../components/BasicInfo';\nimport IngredientsCheckbox from '../components/IngredientsCheckbox';\nimport './ProcessoComida.css';\n\nconst ProcessoBebidas = () => {\n  const [drinkDetails, setDrinkDetails] = useState();\n  const [isRecipeDone, setIsRecipeDone] = useState(false);\n\n  const idDrink = useParams().id;\n\n  const { detailsInfo, setDetailsInfo, isRecipeFinished } = useContext(ContextAPI);\n\n  const getDrinkDetails = async () => {\n    const drink = await detailsDrinkById(idDrink);\n\n    setDrinkDetails({\n      ...drinkDetails,\n      drink: drink.drinks[0],\n    });\n    setDetailsInfo({ ...detailsInfo, drinks: drink.drinks[0] });\n  };\n\n  const loadDoneRecipesFromStorage = () => {\n    if (localStorage.getItem('doneRecipes') === null) {\n      const doneRecipes = [];\n      localStorage.setItem('doneRecipes', JSON.stringify(doneRecipes));\n    }\n\n    const doneRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n    const isCurrentRecipeDone = doneRecipes.some((key) => key.id === idDrink);\n\n    if (isCurrentRecipeDone) setIsRecipeDone(true);\n    else setIsRecipeDone(false);\n  };\n\n  useEffect(() => {\n    getDrinkDetails();\n    loadDoneRecipesFromStorage();\n  }, []);\n\n  const removeDrinkFromProgress = () => {\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    if (progressRecipes !== null) {\n      const progressKeys = Object.keys(progressRecipes.cocktails);\n      let cocktailsObject = {};\n      progressKeys.forEach((key) => {\n        if (key !== idDrink) {\n          cocktailsObject = { ...cocktailsObject, [key]: progressKeys[key] };\n        }\n      });\n      localStorage.setItem('inProgressRecipes', JSON.stringify({\n        ...progressRecipes,\n        cocktails: cocktailsObject,\n      }));\n    }\n  };\n\n  const setDoneRecipes = () => {\n    if (drinkDetails) {\n      removeDrinkFromProgress();\n      setIsRecipeDone(true);\n\n      const doneRecipes = JSON.parse(localStorage.getItem('doneRecipes'));\n      localStorage.setItem('doneRecipes', JSON.stringify([...doneRecipes, {\n        id: drinkDetails.drink.idDrink,\n        type: 'bebida',\n        area: drinkDetails.drink.strArea,\n        category: drinkDetails.drink.strCategory,\n        alcoholicOrNot: '',\n        name: drinkDetails.drink.strDrink,\n        photoFood: drinkDetails.drink.strDrinkThumb,\n        doneDate: '',\n        tags: drinkDetails.drink.strTags\n          ? drinkDetails.drink.strTags\n          : [],\n      }]));\n    } else return '';\n  };\n\n  const showDoneRecipeBtn = () => (\n    <Link to=\"/receitas-feitas\">\n      <button\n        type=\"button\"\n        data-testid=\"finish-recipe-btn\"\n        onClick={ setDoneRecipes }\n        disabled={ !(isRecipeFinished) }\n      >\n        Finalizar Receita\n      </button>\n    </Link>\n  );\n\n  return (\n    <div>\n      {!drinkDetails\n        ? <div className=\"loading\">Loading...</div>\n        : (\n          <div className=\"body-progress\">\n            <BasicInfo />\n            <IngredientsCheckbox />\n            <Instructions />\n            <div className=\"container-button\">\n              {!isRecipeDone && showDoneRecipeBtn()}\n            </div>\n          </div>\n        )}\n    </div>\n  );\n};\n\nexport default ProcessoBebidas;\n"]},"metadata":{},"sourceType":"module"}