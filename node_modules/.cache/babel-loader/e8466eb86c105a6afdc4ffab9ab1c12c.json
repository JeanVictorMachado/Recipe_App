{"ast":null,"code":"var _jsxFileName = \"/home/jean/Trybe/projetos-Trybe/sd-06-project-recipes-app/src/Pages/DetalhesBebidas.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { detailsDrinkById, showSugestedFoods } from '../services/aPI';\nimport './DetalhesBebidas.css';\nimport { FavoriteDrinkButton } from '../components/FavoriteBtn';\nimport ShareButton from '../components/ShareBtn';\n\nconst DetalhesBebidas = () => {\n  const [stateLocal, setStatelocal] = useState();\n  const [stateSugestions, setSugestions] = useState();\n  const [drinksInProgress, setDrinksInProgress] = useState({\n    cocktails: {}\n  });\n  const currentDrinkID = useParams().id;\n\n  const handleIdDetails = async () => {\n    const drink = await detailsDrinkById(currentDrinkID);\n    console.log(drink);\n    setStatelocal({ ...stateLocal,\n      drink\n    });\n  };\n\n  const getSugestedFoods = async () => {\n    const foods = await showSugestedFoods();\n    setSugestions(foods);\n  };\n\n  const loadRecipesInProgressFromLocalStorage = () => {\n    if (localStorage.getItem('inProgressRecipes') === null) {\n      const inProgressRecipes = {\n        cocktails: {},\n        meals: {}\n      };\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n    }\n\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    setDrinksInProgress({\n      cocktails: progressRecipes.cocktails\n    });\n  };\n\n  useEffect(() => {\n    handleIdDetails();\n    getSugestedFoods();\n    loadRecipesInProgressFromLocalStorage();\n  }, []);\n\n  const getIngredientsOrMeasure = param => {\n    const dataObject = stateLocal.drink.drinks[0];\n    const dataKeys = Object.keys(dataObject).filter(key => key.includes(param) && dataObject[key] !== null && dataObject[key] !== '');\n    const ingredients = dataKeys.map(key => dataObject[key]);\n    return ingredients;\n  };\n\n  const progressButton = () => {\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const drinkProgressID = stateLocal.drink.drinks[0].idDrink;\n    const inProgressRecipes = { ...progressRecipes,\n      cocktails: { ...progressRecipes.cocktails,\n        [drinkProgressID]: getIngredientsOrMeasure('strIngredient')\n      }\n    };\n    localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n  };\n\n  const number = 5;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"body-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }, stateLocal ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, console.log(stateLocal), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-photo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    \"data-testid\": \"recipe-photo\",\n    className: \"img-initial\",\n    src: stateLocal.drink.drinks[0].strDrinkThumb,\n    alt: stateLocal.drink.drinks[0].strDrink,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"title\",\n    \"data-testid\": \"recipe-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, stateLocal.drink.drinks[0].strDrink), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ShareButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FavoriteDrinkButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-cotegory\",\n    \"data-testid\": \"recipe-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, stateLocal.drink.drinks[0].strCategory, stateLocal.drink.drinks[0].strAlcoholic), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"span-ingredients\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, \"Ingredients\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"box-ingredients\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, getIngredientsOrMeasure('strIngredient').map((ingred, i) => /*#__PURE__*/React.createElement(\"li\", {\n    \"data-testid\": `${i}-ingredient-name-and-measure`,\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, `${ingred} - ${getIngredientsOrMeasure('strMeasure')[i]}`)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, \"Instructions\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"box-instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    \"data-testid\": \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }\n  }, stateLocal.drink.drinks[0].strInstructions)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"recomendation-span\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, \"Recomendadas\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-recomendations\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, stateSugestions && stateSugestions.meals.map((meal, index) => {\n    if (index <= number) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"main-scroll\",\n        key: meal.strMeal,\n        \"data-testid\": `${index}-recomendation-card`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        \"data-testid\": `${index}-recomendation-title`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }\n      }, meal.strMeal), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"button\",\n        onClick: () => handleIdDetails(meal.idMeal),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: `/bebidas/${meal.idMeal}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"img-recomendations\",\n        src: meal.strMealThumb,\n        alt: meal.strMeal,\n        \"data-testid\": `${index}-card-img`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }\n      }))));\n    }\n\n    return '';\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"start-recipe-btn\",\n    onClick: progressButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"link-button\",\n    to: `/bebidas/${stateLocal.drink.drinks[0].idDrink}/in-progress`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, drinksInProgress.cocktails[stateLocal.drink.drinks[0].idDrink] ? 'Continuar Receita' : 'Iniciar Receita')))) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 11\n    }\n  }, \"Loading...\"));\n};\n\nexport default DetalhesBebidas;","map":{"version":3,"sources":["/home/jean/Trybe/projetos-Trybe/sd-06-project-recipes-app/src/Pages/DetalhesBebidas.jsx"],"names":["React","useEffect","useState","useParams","Link","detailsDrinkById","showSugestedFoods","FavoriteDrinkButton","ShareButton","DetalhesBebidas","stateLocal","setStatelocal","stateSugestions","setSugestions","drinksInProgress","setDrinksInProgress","cocktails","currentDrinkID","id","handleIdDetails","drink","console","log","getSugestedFoods","foods","loadRecipesInProgressFromLocalStorage","localStorage","getItem","inProgressRecipes","meals","setItem","JSON","stringify","progressRecipes","parse","getIngredientsOrMeasure","param","dataObject","drinks","dataKeys","Object","keys","filter","key","includes","ingredients","map","progressButton","drinkProgressID","idDrink","number","strDrinkThumb","strDrink","strCategory","strAlcoholic","ingred","i","strInstructions","meal","index","strMeal","idMeal","strMealThumb"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { detailsDrinkById, showSugestedFoods } from '../services/aPI';\nimport './DetalhesBebidas.css';\nimport { FavoriteDrinkButton } from '../components/FavoriteBtn';\nimport ShareButton from '../components/ShareBtn';\n\nconst DetalhesBebidas = () => {\n  const [stateLocal, setStatelocal] = useState();\n  const [stateSugestions, setSugestions] = useState();\n  const [drinksInProgress, setDrinksInProgress] = useState({ cocktails: {} });\n\n  const currentDrinkID = useParams().id;\n\n  const handleIdDetails = async () => {\n    const drink = await detailsDrinkById(currentDrinkID);\n    console.log(drink);\n\n    setStatelocal({ ...stateLocal, drink });\n  };\n\n  const getSugestedFoods = async () => {\n    const foods = await showSugestedFoods();\n\n    setSugestions(foods);\n  };\n\n  const loadRecipesInProgressFromLocalStorage = () => {\n    if (localStorage.getItem('inProgressRecipes') === null) {\n      const inProgressRecipes = {\n        cocktails: {},\n        meals: {},\n      };\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n    }\n\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    setDrinksInProgress({ cocktails: progressRecipes.cocktails });\n  };\n\n  useEffect(() => {\n    handleIdDetails();\n    getSugestedFoods();\n    loadRecipesInProgressFromLocalStorage();\n  }, []);\n\n  const getIngredientsOrMeasure = (param) => {\n    const dataObject = stateLocal.drink.drinks[0];\n\n    const dataKeys = Object.keys(dataObject)\n      .filter((key) => key.includes(param)\n        && dataObject[key] !== null && dataObject[key] !== '');\n\n    const ingredients = dataKeys\n      .map((key) => dataObject[key]);\n\n    return ingredients;\n  };\n\n  const progressButton = () => {\n    const progressRecipes = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const drinkProgressID = stateLocal.drink.drinks[0].idDrink;\n    const inProgressRecipes = {\n      ...progressRecipes,\n      cocktails: {\n        ...progressRecipes.cocktails,\n        [drinkProgressID]: getIngredientsOrMeasure('strIngredient'),\n      },\n    };\n    localStorage.setItem('inProgressRecipes', JSON.stringify(inProgressRecipes));\n  };\n\n  const number = 5;\n\n  return (\n    <div className=\"body-details\">\n      {stateLocal ? (\n        <div className=\"container-main\">\n          {console.log(stateLocal)}\n          <div className=\"container-photo\">\n            <img\n              data-testid=\"recipe-photo\"\n              className=\"img-initial\"\n              src={ stateLocal.drink.drinks[0].strDrinkThumb }\n              alt={ stateLocal.drink.drinks[0].strDrink }\n            />\n          </div>\n          <div className=\"container-title\">\n            <span\n              className=\"title\"\n              data-testid=\"recipe-title\"\n            >\n              { stateLocal.drink.drinks[0].strDrink }\n            </span>\n            <div className=\"container-icons\">\n              <ShareButton />\n              <FavoriteDrinkButton />\n            </div>\n          </div>\n          <div\n            className=\"container-cotegory\"\n            data-testid=\"recipe-category\"\n          >\n            {stateLocal.drink.drinks[0].strCategory}\n            {stateLocal.drink.drinks[0].strAlcoholic}\n          </div>\n          <div\n            className=\"span-ingredients\"\n          >\n            <span>\n              Ingredients\n            </span>\n          </div>\n          <div className=\"box-ingredients\">\n            <ul>\n              {getIngredientsOrMeasure('strIngredient').map((ingred, i) => (\n                <li\n                  data-testid={ `${i}-ingredient-name-and-measure` }\n                  key={ i }\n                >\n                  {`${ingred} - ${getIngredientsOrMeasure('strMeasure')[i]}`}\n                </li>\n              ))}\n            </ul>\n          </div>\n          <div className=\"container-span\">\n            <span>Instructions</span>\n          </div>\n          <div className=\"box-instructions\">\n            <span\n              data-testid=\"instructions\"\n            >\n              {stateLocal.drink.drinks[0].strInstructions}\n            </span>\n          </div>\n          <div className=\"recomendation-span\">\n            <span>\n              Recomendadas\n            </span>\n          </div>\n          <div className=\"container-recomendations\">\n            { stateSugestions && stateSugestions.meals.map((meal, index) => {\n              if (index <= number) {\n                return (\n                  <div\n                    className=\"main-scroll\"\n                    key={ meal.strMeal }\n                    data-testid={ `${index}-recomendation-card` }\n                  >\n                    <p data-testid={ `${index}-recomendation-title` }>\n                      {meal.strMeal}\n                    </p>\n                    <button\n                      type=\"button\"\n                      className=\"button\"\n                      onClick={ () => handleIdDetails(meal.idMeal) }\n                    >\n                      <Link to={ `/bebidas/${meal.idMeal}` }>\n                        <img\n                          className=\"img-recomendations\"\n                          src={ meal.strMealThumb }\n                          alt={ meal.strMeal }\n                          data-testid={ `${index}-card-img` }\n                        />\n                      </Link>\n                    </button>\n                  </div>\n                );\n              }\n              return '';\n            })}\n          </div>\n          <div className=\"container-button\">\n            <button\n              type=\"button\"\n              data-testid=\"start-recipe-btn\"\n              onClick={ progressButton }\n            >\n              <Link\n                className=\"link-button\"\n                to={ `/bebidas/${stateLocal.drink.drinks[0].idDrink}/in-progress` }\n              >\n                {drinksInProgress.cocktails[stateLocal.drink.drinks[0].idDrink]\n                  ? 'Continuar Receita' : 'Iniciar Receita'}\n              </Link>\n            </button>\n          </div>\n        </div>\n      ) : <div>Loading...</div>}\n    </div>\n  );\n};\n\nexport default DetalhesBebidas;\n"]},"metadata":{},"sourceType":"module"}